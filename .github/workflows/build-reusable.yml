---
# Environment variables defined in a calling workflow are not accessible to this reusable workflow. Refer to the documentation for further details on this limitation.
name: Build Reusable
on:
  workflow_call:
    secrets:
      CODECOV_TOKEN:
        required: false
    inputs:
      Pure:
        required: false
        default: true
        type: boolean
      PyVersionLatest:
        required: true
        type: string
      PkgName:
        required: true
        type: string
      PkgRootFolder:
        # Relative to github.workspace
        required: false
        type: string
        default: ""
      CIBWBEFOREALLLINUX:
        required: false
        default: ""
        type: string
      CIBWBEFOREALLWINDOWS:
        required: false
        default: ""
        type: string
permissions:
  contents: read
jobs:
  Tag:
    permissions:
      contents: write
    # Aftermath of if-conditional of Upload jobs
    if: github.event_name != 'pull_request'
    runs-on: windows-2019
    steps:
      - uses: actions/checkout@v4.1.0
      - name: Tag with PyPI version
        uses: actions/github-script@v7
        with:
          script: |
            github.rest.git.createRef({
              owner: context.repo.owner,
              repo: context.repo.repo,
              ref: 'refs/tags/v3.0.0',
              sha: context.sha
            })
